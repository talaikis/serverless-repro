"use strict";var e=require("./tslib.es6-adbab166.js"),t=require("./index-43be9a6d.js"),i=require("./parser-3cc7fe8a.js"),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function r(e){var t=e.getUTCFullYear(),i=e.getUTCMonth(),r=e.getUTCDay(),s=e.getUTCDate(),a=e.getUTCHours(),c=e.getUTCMinutes(),u=e.getUTCSeconds();return n[r]+", "+(s<10?"0"+s:""+s)+" "+o[i]+" "+t+" "+(a<10?"0"+a:""+a)+":"+(c<10?"0"+c:""+c)+":"+(u<10?"0"+u:""+u)+" GMT"}var s,a,c,u,f,d,l,S,g,v,p,L,m,E,y,h,C,x,b,w,I,R,k,K,T,M,z,N,A,P,_,O,j,D,G,B,q,V,$,U,F,H,W,X,J,Y,Z,Q,ee,te,ie,ne,oe,re,se,ae,ce,ue,fe,de,le,Se,ge,ve,pe,Le,me,Ee,ye,he,Ce,xe,be,we,Ie,Re,ke,Ke,Te,Me,ze,Ne,Ae,Pe,_e,Oe,je,De,Ge,Be,qe,Ve,$e,Ue,Fe,He,We,Xe,Je,Ye,Ze,Qe,et,tt,it,nt,ot,rt,st,at,ct,ut,ft,dt,lt,St,gt,vt,pt,Lt,mt,Et,yt,ht,Ct,xt,bt,wt,It,Rt,kt,Kt,Tt,Mt,zt,Nt,At,Pt,_t,Ot,jt,Dt,Gt,Bt,qt,Vt,$t,Ut,Ft,Ht,Wt,Xt,Jt,Yt,Zt,Qt,ei,ti,ii,ni,oi,ri,si,ai,ci,ui,fi,di,li,Si,gi,vi,pi,Li,mi,Ei,yi,hi,Ci,xi,bi,wi,Ii,Ri,ki,Ki,Ti,Mi,zi,Ni,Ai,Pi,_i,Oi,ji,Di,Gi,Bi,qi,Vi,$i,Ui,Fi,Hi,Wi,Xi,Ji,Yi,Zi,Qi,en,tn,nn,on,rn,sn,an,cn,un,fn,dn,ln,Sn,gn,vn,pn,Ln,mn,En,yn,hn,Cn,xn,bn,wn,In,Rn,kn,Kn,Tn,Mn,zn,Nn,An,Pn,_n,On,jn=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Dn=/(\d+\.){3}\d+/,Gn=/\.\./,Bn=/\./,qn=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,Vn=/^s3(-external-1)?\.amazonaws\.com$/,$n=function(e){return Hn(e)?e.replace(/fips-|-fips/,""):e},Un=function(e){var t=e.match(qn);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},Fn=function(e,t){if(""===e)throw new Error("ARN region is empty");if(Hn(t.clientRegion)){if(!t.allowFipsRegion)throw new Error("FIPS region is not supported");if(!Wn(e,t.clientRegion))throw new Error("Client FIPS region "+t.clientRegion+" doesn't match region "+e+" in ARN")}if(!t.useArnRegion&&!Wn(e,t.clientRegion)&&!Wn(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion)},Hn=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Wn=function(e,t){return e===t||$n(e)===t||e===$n(t)},Xn=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&Bn.test(e))throw new Error("Invalid DNS label "+e)},Jn=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")},Yn=function(t){var i=t.isCustomEndpoint;t.baseHostname;var n=t.dualstackEndpoint,o=t.accelerateEndpoint;if(i){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(o)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(t)?Qn(e.__assign(e.__assign({},t),{isCustomEndpoint:i})):Zn(e.__assign(e.__assign({},t),{isCustomEndpoint:i}))},Zn=function(t){var i,n=t.isCustomEndpoint,o=t.baseHostname,r=t.clientRegion,s=n?o:(i=o,Vn.test(i)?[i.replace(".amazonaws.com",""),"amazonaws.com"]:Un(i))[1],a=t.pathStyleEndpoint,c=t.dualstackEndpoint,u=void 0!==c&&c,f=t.accelerateEndpoint,d=void 0!==f&&f,l=t.tlsCompatible,S=void 0===l||l,g=t.useArnRegion,v=t.bucketName,p=t.clientPartition,L=void 0===p?"aws":p,m=t.clientSigningRegion,E=void 0===m?r:m;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:a,accelerateEndpoint:d,tlsCompatible:S});var y=v.service,h=v.partition,C=v.accountId,x=v.region,b=v.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e&&"s3-object-lambda"!==e)throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")}(y),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(h,{clientPartition:L}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(C),function(e){if(["s3-external-1","aws-global"].includes($n(e)))throw new Error("Client region "+e+" is not regional")}(r);var w=function(t){var i=t.includes(":")?":":"/",n=e.__read(t.split(i)),o=n[0],r=n.slice(1);if("accesspoint"===o){if(1!==r.length||""===r[0])throw new Error("Access Point ARN should have one resource accesspoint"+i+"{accesspointname}");return{accesspointName:r[0]}}if("outpost"===o){if(!r[0]||"accesspoint"!==r[1]||!r[2]||3!==r.length)throw new Error("Outpost ARN should have resource outpost"+i+"{outpostId}"+i+"accesspoint"+i+"{accesspointName}");var s=e.__read(r,3),a=s[0];return s[1],{outpostId:a,accesspointName:s[2]}}throw new Error("ARN resource should begin with 'accesspoint"+i+"' or 'outpost"+i+"'")}(b),I=w.accesspointName,R=w.outpostId,k=I+"-"+C;Xn(k,{tlsCompatible:S});var K=g?x:r,T=g?x:E;return"s3-object-lambda"===y?(Fn(x,{useArnRegion:g,clientRegion:r,clientSigningRegion:E,allowFipsRegion:!0}),Jn(u),{bucketEndpoint:!0,hostname:k+"."+y+(Hn(r)?"-fips":"")+"."+$n(K)+"."+s,signingRegion:T,signingService:y}):R?(Fn(x,{useArnRegion:g,clientRegion:r,clientSigningRegion:E}),function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(y),Xn(R,{tlsCompatible:S}),Jn(u),function(e){if(Hn(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(K),{bucketEndpoint:!0,hostname:k+"."+R+(n?"":".s3-outposts."+K)+"."+s,signingRegion:T,signingService:"s3-outposts"}):(Fn(x,{useArnRegion:g,clientRegion:r,clientSigningRegion:E,allowFipsRegion:!0}),function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(y),{bucketEndpoint:!0,hostname:""+k+(n?"":".s3-accesspoint"+(Hn(r)?"-fips":"")+(u?".dualstack":"")+"."+$n(K))+"."+s,signingRegion:T})},Qn=function(t){var i,n=t.accelerateEndpoint,o=void 0!==n&&n,r=t.clientRegion,s=t.baseHostname,a=t.bucketName,c=t.dualstackEndpoint,u=void 0!==c&&c,f=t.pathStyleEndpoint,d=void 0!==f&&f,l=t.tlsCompatible,S=void 0===l||l,g=t.isCustomEndpoint,v=void 0!==g&&g,p=e.__read(v?[r,s]:(i=s,Vn.test(i)?["us-east-1","amazonaws.com"]:Un(i)),2),L=p[0],m=p[1];return d||!function(e){return jn.test(e)&&!Dn.test(e)&&!Gn.test(e)}(a)||S&&Bn.test(a)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+L+"."+m:s}:(o?s="s3-accelerate"+(u?".dualstack":"")+"."+m:u&&(s="s3.dualstack."+L+"."+m),{bucketEndpoint:!0,hostname:a+"."+s})},eo={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0};!function(e){e.filterSensitiveLog=e=>({...e})}(s||(s={})),function(e){e.filterSensitiveLog=e=>({...e})}(a||(a={})),function(e){e.filterSensitiveLog=e=>({...e})}(c||(c={})),function(e){e.filterSensitiveLog=e=>({...e})}(u||(u={})),function(e){e.filterSensitiveLog=e=>({...e})}(f||(f={})),function(e){e.filterSensitiveLog=e=>({...e})}(d||(d={})),function(e){e.filterSensitiveLog=e=>({...e})}(l||(l={})),function(e){e.filterSensitiveLog=e=>({...e})}(S||(S={})),function(e){e.filterSensitiveLog=e=>({...e})}(g||(g={})),function(e){e.filterSensitiveLog=e=>({...e})}(v||(v={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING}})}(p||(p={})),function(e){e.filterSensitiveLog=e=>({...e})}(L||(L={})),function(e){e.filterSensitiveLog=e=>({...e})}(m||(m={})),function(e){e.filterSensitiveLog=e=>({...e})}(E||(E={})),function(e){e.filterSensitiveLog=e=>({...e})}(y||(y={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:t.SENSITIVE_STRING}})}(h||(h={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:t.SENSITIVE_STRING},...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:t.SENSITIVE_STRING},...e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:t.SENSITIVE_STRING}})}(C||(C={})),function(e){e.filterSensitiveLog=e=>({...e})}(x||(x={})),function(e){e.filterSensitiveLog=e=>({...e})}(b||(b={})),function(e){e.filterSensitiveLog=e=>({...e})}(w||(w={})),function(e){e.filterSensitiveLog=e=>({...e})}(I||(I={})),function(e){e.filterSensitiveLog=e=>({...e})}(R||(R={})),function(e){e.filterSensitiveLog=e=>({...e})}(k||(k={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:t.SENSITIVE_STRING}})}(K||(K={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:t.SENSITIVE_STRING},...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:t.SENSITIVE_STRING}})}(T||(T={})),function(e){e.filterSensitiveLog=e=>({...e})}(M||(M={})),function(e){e.filterSensitiveLog=e=>({...e})}(z||(z={})),function(e){e.filterSensitiveLog=e=>({...e})}(N||(N={})),function(e){e.filterSensitiveLog=e=>({...e})}(A||(A={})),function(e){e.filterSensitiveLog=e=>({...e})}(P||(P={})),function(e){e.filterSensitiveLog=e=>({...e})}(_||(_={})),function(e){e.filterSensitiveLog=e=>({...e})}(O||(O={})),function(e){e.filterSensitiveLog=e=>({...e})}(j||(j={})),function(e){e.filterSensitiveLog=e=>({...e})}(D||(D={})),function(e){e.filterSensitiveLog=e=>({...e})}(G||(G={})),function(e){e.filterSensitiveLog=e=>({...e})}(B||(B={})),function(e){e.filterSensitiveLog=e=>({...e})}(q||(q={})),function(e){e.filterSensitiveLog=e=>({...e})}(V||(V={})),function(e){e.filterSensitiveLog=e=>({...e})}($||($={})),function(e){e.filterSensitiveLog=e=>({...e})}(U||(U={})),function(e){e.filterSensitiveLog=e=>({...e})}(F||(F={})),function(e){e.filterSensitiveLog=e=>({...e})}(H||(H={})),function(e){e.filterSensitiveLog=e=>({...e})}(W||(W={})),function(e){e.filterSensitiveLog=e=>({...e})}(X||(X={})),function(e){e.filterSensitiveLog=e=>({...e})}(J||(J={})),function(e){e.filterSensitiveLog=e=>({...e})}(Y||(Y={})),function(e){e.filterSensitiveLog=e=>({...e})}(Z||(Z={})),function(e){e.filterSensitiveLog=e=>({...e})}(Q||(Q={})),function(e){e.filterSensitiveLog=e=>({...e})}(ee||(ee={})),function(e){e.filterSensitiveLog=e=>({...e})}(te||(te={})),function(e){e.filterSensitiveLog=e=>({...e})}(ie||(ie={})),function(e){e.filterSensitiveLog=e=>({...e})}(ne||(ne={})),function(e){e.filterSensitiveLog=e=>({...e})}(oe||(oe={})),function(e){e.filterSensitiveLog=e=>({...e})}(re||(re={})),function(e){e.filterSensitiveLog=e=>({...e})}(se||(se={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1]),e.filterSensitiveLog=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:re.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:se.filterSensitiveLog(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0}(ae||(ae={})),function(e){e.filterSensitiveLog=e=>({...e})}(ce||(ce={})),function(e){e.filterSensitiveLog=e=>({...e})}(ue||(ue={})),function(e){e.filterSensitiveLog=e=>({...e})}(fe||(fe={})),function(e){e.filterSensitiveLog=e=>({...e})}(de||(de={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Filter&&{Filter:ae.filterSensitiveLog(e.Filter)}})}(le||(le={})),function(e){e.filterSensitiveLog=e=>({...e,...e.AnalyticsConfiguration&&{AnalyticsConfiguration:le.filterSensitiveLog(e.AnalyticsConfiguration)}})}(Se||(Se={})),function(e){e.filterSensitiveLog=e=>({...e})}(ge||(ge={})),function(e){e.filterSensitiveLog=e=>({...e})}(ve||(ve={})),function(e){e.filterSensitiveLog=e=>({...e})}(pe||(pe={})),function(e){e.filterSensitiveLog=e=>({...e})}(Le||(Le={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KMSMasterKeyID&&{KMSMasterKeyID:t.SENSITIVE_STRING}})}(me||(me={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:me.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)}})}(Ee||(Ee={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Ee.filterSensitiveLog(e)))}})}(ye||(ye={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:ye.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(he||(he={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ce||(Ce={})),function(e){e.filterSensitiveLog=e=>({...e})}(xe||(xe={})),function(e){e.filterSensitiveLog=e=>({...e})}(be||(be={})),function(e){e.filterSensitiveLog=e=>({...e})}(we||(we={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ie||(Ie={})),function(e){e.filterSensitiveLog=e=>({...e})}(Re||(Re={})),function(e){e.filterSensitiveLog=e=>({...e})}(ke||(ke={})),function(e){e.filterSensitiveLog=e=>({...e,...e.KeyId&&{KeyId:t.SENSITIVE_STRING}})}(Ke||(Ke={})),function(e){e.filterSensitiveLog=e=>({...e})}(Te||(Te={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMS&&{SSEKMS:Ke.filterSensitiveLog(e.SSEKMS)}})}(Me||(Me={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Encryption&&{Encryption:Me.filterSensitiveLog(e.Encryption)}})}(ze||(ze={})),function(e){e.filterSensitiveLog=e=>({...e,...e.S3BucketDestination&&{S3BucketDestination:ze.filterSensitiveLog(e.S3BucketDestination)}})}(Ne||(Ne={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ae||(Ae={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pe||(Pe={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Destination&&{Destination:Ne.filterSensitiveLog(e.Destination)}})}(_e||(_e={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:_e.filterSensitiveLog(e.InventoryConfiguration)}})}(Oe||(Oe={})),function(e){e.filterSensitiveLog=e=>({...e})}(je||(je={})),function(e){e.filterSensitiveLog=e=>({...e})}(De||(De={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ge||(Ge={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1]),e.filterSensitiveLog=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:re.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Ge.filterSensitiveLog(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0}(Be||(Be={})),function(e){e.filterSensitiveLog=e=>({...e})}(qe||(qe={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ve||(Ve={})),function(e){e.filterSensitiveLog=e=>({...e})}($e||($e={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Filter&&{Filter:Be.filterSensitiveLog(e.Filter)}})}(Ue||(Ue={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Ue.filterSensitiveLog(e)))}})}(Fe||(Fe={})),function(e){e.filterSensitiveLog=e=>({...e})}(He||(He={})),function(e){e.filterSensitiveLog=e=>({...e})}(We||(We={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xe||(Xe={})),function(e){e.filterSensitiveLog=e=>({...e})}(Je||(Je={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ye||(Ye={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ze||(Ze={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qe||(Qe={})),function(e){e.filterSensitiveLog=e=>({...e})}(et||(et={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1]),e.filterSensitiveLog=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:re.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:et.filterSensitiveLog(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0}(tt||(tt={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Filter&&{Filter:tt.filterSensitiveLog(e.Filter)}})}(it||(it={})),function(e){e.filterSensitiveLog=e=>({...e,...e.MetricsConfiguration&&{MetricsConfiguration:it.filterSensitiveLog(e.MetricsConfiguration)}})}(nt||(nt={})),function(e){e.filterSensitiveLog=e=>({...e})}(ot||(ot={})),function(e){e.filterSensitiveLog=e=>({...e})}(rt||(rt={})),function(e){e.filterSensitiveLog=e=>({...e})}(st||(st={})),function(e){e.filterSensitiveLog=e=>({...e})}(at||(at={})),function(e){e.filterSensitiveLog=e=>({...e})}(ct||(ct={})),function(e){e.filterSensitiveLog=e=>({...e})}(ut||(ut={})),function(e){e.filterSensitiveLog=e=>({...e})}(ft||(ft={})),function(e){e.filterSensitiveLog=e=>({...e})}(dt||(dt={})),function(e){e.filterSensitiveLog=e=>({...e})}(lt||(lt={})),function(e){e.filterSensitiveLog=e=>({...e})}(St||(St={})),function(e){e.filterSensitiveLog=e=>({...e})}(gt||(gt={})),function(e){e.filterSensitiveLog=e=>({...e})}(vt||(vt={})),function(e){e.filterSensitiveLog=e=>({...e})}(pt||(pt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Lt||(Lt={})),function(e){e.filterSensitiveLog=e=>({...e})}(mt||(mt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Et||(Et={})),function(e){e.filterSensitiveLog=e=>({...e})}(yt||(yt={})),function(e){e.filterSensitiveLog=e=>({...e})}(ht||(ht={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ct||(Ct={})),function(e){e.filterSensitiveLog=e=>({...e})}(xt||(xt={})),function(e){e.filterSensitiveLog=e=>({...e})}(bt||(bt={})),function(e){e.filterSensitiveLog=e=>({...e})}(wt||(wt={})),function(e){e.filterSensitiveLog=e=>({...e})}(It||(It={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rt||(Rt={})),function(e){e.filterSensitiveLog=e=>({...e})}(kt||(kt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kt||(Kt={})),function(e){e.visit=(e,t)=>void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1]),e.filterSensitiveLog=e=>void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:re.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Kt.filterSensitiveLog(e.And)}:void 0!==e.$unknown?{[e.$unknown[0]]:"UNKNOWN"}:void 0}(Tt||(Tt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mt||(Mt={})),function(e){e.filterSensitiveLog=e=>({...e})}(zt||(zt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nt||(Nt={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Filter&&{Filter:Tt.filterSensitiveLog(e.Filter)}})}(At||(At={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>At.filterSensitiveLog(e)))}})}(Pt||(Pt={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ReplicationConfiguration&&{ReplicationConfiguration:Pt.filterSensitiveLog(e.ReplicationConfiguration)}})}(_t||(_t={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ot||(Ot={})),function(e){e.filterSensitiveLog=e=>({...e})}(jt||(jt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Dt||(Dt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gt||(Gt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bt||(Bt={})),function(e){e.filterSensitiveLog=e=>({...e})}(qt||(qt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vt||(Vt={})),function(e){e.filterSensitiveLog=e=>({...e})}($t||($t={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ut||(Ut={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ft||(Ft={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ht||(Ht={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wt||(Wt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xt||(Xt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Jt||(Jt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yt||(Yt={})),exports.GetObjectOutput=void 0,(exports.GetObjectOutput||(exports.GetObjectOutput={})).filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING}}),exports.GetObjectRequest=void 0,(exports.GetObjectRequest||(exports.GetObjectRequest={})).filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:t.SENSITIVE_STRING}}),function(e){e.filterSensitiveLog=e=>({...e})}(Zt||(Zt={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qt||(Qt={})),function(e){e.filterSensitiveLog=e=>({...e})}(ei||(ei={})),function(e){e.filterSensitiveLog=e=>({...e})}(ti||(ti={})),function(e){e.filterSensitiveLog=e=>({...e})}(ii||(ii={})),function(e){e.filterSensitiveLog=e=>({...e})}(ni||(ni={})),function(e){e.filterSensitiveLog=e=>({...e})}(oi||(oi={})),function(e){e.filterSensitiveLog=e=>({...e})}(ri||(ri={})),function(e){e.filterSensitiveLog=e=>({...e})}(si||(si={})),function(e){e.filterSensitiveLog=e=>({...e})}(ai||(ai={})),function(e){e.filterSensitiveLog=e=>({...e})}(ci||(ci={})),function(e){e.filterSensitiveLog=e=>({...e})}(ui||(ui={})),function(e){e.filterSensitiveLog=e=>({...e})}(fi||(fi={})),function(e){e.filterSensitiveLog=e=>({...e})}(di||(di={})),function(e){e.filterSensitiveLog=e=>({...e})}(li||(li={})),function(e){e.filterSensitiveLog=e=>({...e})}(Si||(Si={})),function(e){e.filterSensitiveLog=e=>({...e})}(gi||(gi={})),function(e){e.filterSensitiveLog=e=>({...e})}(vi||(vi={})),function(e){e.filterSensitiveLog=e=>({...e})}(pi||(pi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Li||(Li={})),function(e){e.filterSensitiveLog=e=>({...e})}(mi||(mi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ei||(Ei={})),function(e){e.filterSensitiveLog=e=>({...e})}(yi||(yi={})),function(e){e.filterSensitiveLog=e=>({...e})}(hi||(hi={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING}})}(Ci||(Ci={})),function(e){e.filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:t.SENSITIVE_STRING}})}(xi||(xi={})),function(e){e.filterSensitiveLog=e=>({...e,...e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map((e=>le.filterSensitiveLog(e)))}})}(bi||(bi={})),function(e){e.filterSensitiveLog=e=>({...e})}(wi||(wi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ii||(Ii={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ri||(Ri={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((e=>_e.filterSensitiveLog(e)))}})}(ki||(ki={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ki||(Ki={})),function(e){e.filterSensitiveLog=e=>({...e,...e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map((e=>it.filterSensitiveLog(e)))}})}(Ti||(Ti={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mi||(Mi={})),function(e){e.filterSensitiveLog=e=>({...e})}(zi||(zi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ni||(Ni={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ai||(Ai={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pi||(Pi={})),function(e){e.filterSensitiveLog=e=>({...e})}(_i||(_i={})),function(e){e.filterSensitiveLog=e=>({...e})}(Oi||(Oi={})),function(e){e.filterSensitiveLog=e=>({...e})}(ji||(ji={})),function(e){e.filterSensitiveLog=e=>({...e})}(Di||(Di={})),function(e){e.filterSensitiveLog=e=>({...e})}(Gi||(Gi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Bi||(Bi={})),function(e){e.filterSensitiveLog=e=>({...e})}(qi||(qi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Vi||(Vi={})),function(e){e.filterSensitiveLog=e=>({...e})}($i||($i={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ui||(Ui={})),function(e){e.filterSensitiveLog=e=>({...e})}(Fi||(Fi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Hi||(Hi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Wi||(Wi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Xi||(Xi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ji||(Ji={})),function(e){e.filterSensitiveLog=e=>({...e})}(Yi||(Yi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Zi||(Zi={})),function(e){e.filterSensitiveLog=e=>({...e})}(Qi||(Qi={})),function(e){e.filterSensitiveLog=e=>({...e,...e.AnalyticsConfiguration&&{AnalyticsConfiguration:le.filterSensitiveLog(e.AnalyticsConfiguration)}})}(en||(en={})),function(e){e.filterSensitiveLog=e=>({...e})}(tn||(tn={})),function(e){e.filterSensitiveLog=e=>({...e})}(nn||(nn={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:ye.filterSensitiveLog(e.ServerSideEncryptionConfiguration)}})}(on||(on={})),function(e){e.filterSensitiveLog=e=>({...e})}(rn||(rn={})),function(e){e.filterSensitiveLog=e=>({...e,...e.InventoryConfiguration&&{InventoryConfiguration:_e.filterSensitiveLog(e.InventoryConfiguration)}})}(sn||(sn={})),function(e){e.filterSensitiveLog=e=>({...e,...e.Rules&&{Rules:e.Rules.map((e=>Ue.filterSensitiveLog(e)))}})}(an||(an={})),function(e){e.filterSensitiveLog=e=>({...e,...e.LifecycleConfiguration&&{LifecycleConfiguration:an.filterSensitiveLog(e.LifecycleConfiguration)}})}(cn||(cn={})),function(e){e.filterSensitiveLog=e=>({...e})}(un||(un={})),function(e){e.filterSensitiveLog=e=>({...e})}(fn||(fn={})),function(e){e.filterSensitiveLog=e=>({...e,...e.MetricsConfiguration&&{MetricsConfiguration:it.filterSensitiveLog(e.MetricsConfiguration)}})}(dn||(dn={})),function(e){e.filterSensitiveLog=e=>({...e})}(ln||(ln={})),function(e){e.filterSensitiveLog=e=>({...e})}(Sn||(Sn={})),function(e){e.filterSensitiveLog=e=>({...e})}(gn||(gn={})),function(e){e.filterSensitiveLog=e=>({...e,...e.ReplicationConfiguration&&{ReplicationConfiguration:Pt.filterSensitiveLog(e.ReplicationConfiguration)}})}(vn||(vn={})),function(e){e.filterSensitiveLog=e=>({...e})}(pn||(pn={})),function(e){e.filterSensitiveLog=e=>({...e})}(Ln||(Ln={})),function(e){e.filterSensitiveLog=e=>({...e})}(mn||(mn={})),function(e){e.filterSensitiveLog=e=>({...e})}(En||(En={})),function(e){e.filterSensitiveLog=e=>({...e})}(yn||(yn={})),function(e){e.filterSensitiveLog=e=>({...e})}(hn||(hn={})),function(e){e.filterSensitiveLog=e=>({...e})}(Cn||(Cn={})),function(e){e.filterSensitiveLog=e=>({...e})}(xn||(xn={})),exports.PutObjectOutput=void 0,(exports.PutObjectOutput||(exports.PutObjectOutput={})).filterSensitiveLog=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:t.SENSITIVE_STRING}}),exports.PutObjectRequest=void 0,(exports.PutObjectRequest||(exports.PutObjectRequest={})).filterSensitiveLog=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:t.SENSITIVE_STRING},...e.SSEKMSKeyId&&{SSEKMSKeyId:t.SENSITIVE_STRING},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:t.SENSITIVE_STRING}}),function(e){e.filterSensitiveLog=e=>({...e})}(bn||(bn={})),function(e){e.filterSensitiveLog=e=>({...e})}(wn||(wn={})),function(e){e.filterSensitiveLog=e=>({...e})}(In||(In={})),function(e){e.filterSensitiveLog=e=>({...e})}(Rn||(Rn={})),function(e){e.filterSensitiveLog=e=>({...e})}(kn||(kn={})),function(e){e.filterSensitiveLog=e=>({...e})}(Kn||(Kn={})),function(e){e.filterSensitiveLog=e=>({...e})}(Tn||(Tn={})),function(e){e.filterSensitiveLog=e=>({...e})}(Mn||(Mn={})),function(e){e.filterSensitiveLog=e=>({...e})}(zn||(zn={})),function(e){e.filterSensitiveLog=e=>({...e})}(Nn||(Nn={})),function(e){e.filterSensitiveLog=e=>({...e})}(An||(An={})),function(e){e.filterSensitiveLog=e=>({...e})}(Pn||(Pn={})),function(e){e.filterSensitiveLog=e=>({...e})}(_n||(_n={})),function(e){e.filterSensitiveLog=e=>({...e})}(On||(On={}));const to=async(e,t)=>{const i={...e,body:await co(e.body,t)};let n,o="UnknownError";switch(o=uo(e,i.body),o){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":n={...await no(i),name:o,$metadata:ro(e)};break;case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":n={...await oo(i),name:o,$metadata:ro(e)};break;default:const t=i.body;o=t.code||t.Code||o,n={...t,name:`${o}`,message:t.message||t.Message||o,$fault:"client",$metadata:ro(e)}}const r=n.message||n.Message||o;return n.message=r,delete n.Message,Promise.reject(Object.assign(new Error(r),n))},io=async(e,t)=>{const i={...e,body:await co(e.body,t)};let n,o="UnknownError";o=uo(e,i.body);{const t=i.body;o=t.code||t.Code||o,n={...t,name:`${o}`,message:t.message||t.Message||o,$fault:"client",$metadata:ro(e)}}const r=n.message||n.Message||o;return n.message=r,delete n.Message,Promise.reject(Object.assign(new Error(r),n))},no=async(e,t)=>{const i={name:"InvalidObjectState",$fault:"client",$metadata:ro(e),AccessTier:void 0,StorageClass:void 0},n=e.body;return void 0!==n.AccessTier&&(i.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(i.StorageClass=n.StorageClass),i},oo=async(e,t)=>{const i={name:"NoSuchKey",$fault:"client",$metadata:ro(e)};return e.body,i},ro=e=>{var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},so=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),ao=e=>!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size),co=(e,n)=>((e,t)=>so(e,t).then((e=>t.utf8Encoder(e))))(e,n).then((e=>{if(e.length){const n=i.parser.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:(e,i)=>""===e.trim()?"":t.lib.decodeHTML(e)}),o="#text",r=Object.keys(n)[0],s=n[r];return s[o]&&(s[r]=s[o],delete s[o]),t.getValueFromTextNode(s)}return{}})),uo=(e,t)=>void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":"";var fo={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0};exports.deserializeAws_restXmlGetObjectCommand=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return to(e,t);const i={$metadata:ro(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0};void 0!==e.headers["x-amz-delete-marker"]&&(i.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(i.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(i.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(i.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(i.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(i.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(i.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(i.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(i.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(i.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(i.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(i.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(i.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(i.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(i.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(i.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(i.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(i.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(i.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(i.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(i.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(i.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(i.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(i.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(i.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(i.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(i.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(i.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(i.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(i.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((t=>{void 0===i.Metadata&&(i.Metadata={}),t.startsWith("x-amz-meta-")&&(i.Metadata[t.substring(11)]=e.headers[t])}));const n=e.body;return i.Body=n,Promise.resolve(i)},exports.deserializeAws_restXmlPutObjectCommand=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return io(e,t);const i={$metadata:ro(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0};return void 0!==e.headers["x-amz-expiration"]&&(i.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(i.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(i.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(i.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(i.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(i.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(i.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(i.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(i.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(i.RequestCharged=e.headers["x-amz-request-charged"]),await so(e.body,t),Promise.resolve(i)},exports.getBucketEndpointPlugin=function(i){return{applyToStack:function(n){n.addRelativeTo(function(i){return function(n,o){return function(r){return e.__awaiter(void 0,void 0,void 0,(function(){var s,a,c,u,f,d,l,S,g,v,p,L,m,E,y,h,C,x;return e.__generator(this,(function(b){switch(b.label){case 0:return s=r.input.Bucket,a=i.bucketEndpoint,c=r.request,t.HttpRequest.isInstance(c)?i.bucketEndpoint?(c.hostname=s,[3,7]):[3,1]:[3,8];case 1:return t.validate(s)?(u=t.parse(s),f=$n,[4,i.region()]):[3,5];case 2:return E=f.apply(void 0,[b.sent()]),[4,i.regionInfoProvider(E)];case 3:return d=b.sent()||{},l=d.partition,S=d.signingRegion,g=void 0===S?E:S,[4,i.useArnRegion()];case 4:return v=b.sent(),p=Yn({bucketName:u,baseHostname:c.hostname,accelerateEndpoint:i.useAccelerateEndpoint,dualstackEndpoint:i.useDualstackEndpoint,pathStyleEndpoint:i.forcePathStyle,tlsCompatible:"https:"===c.protocol,useArnRegion:v,clientPartition:l,clientSigningRegion:g,clientRegion:E,isCustomEndpoint:i.isCustomEndpoint}),C=p.hostname,x=p.bucketEndpoint,L=p.signingRegion,m=p.signingService,L&&L!==g&&(o.signing_region=L),m&&"s3"!==m&&(o.signing_service=m),c.hostname=C,a=x,[3,7];case 5:return y=$n,[4,i.region()];case 6:E=y.apply(void 0,[b.sent()]),h=Yn({bucketName:s,clientRegion:E,baseHostname:c.hostname,accelerateEndpoint:i.useAccelerateEndpoint,dualstackEndpoint:i.useDualstackEndpoint,pathStyleEndpoint:i.forcePathStyle,tlsCompatible:"https:"===c.protocol,isCustomEndpoint:i.isCustomEndpoint}),C=h.hostname,x=h.bucketEndpoint,c.hostname=C,a=x,b.label=7;case 7:a&&(c.path=c.path.replace(/^(\/)?[^\/]+/,""),""===c.path&&(c.path="/")),b.label=8;case 8:return[2,n(e.__assign(e.__assign({},r),{request:c}))]}}))}))}}}(i),eo)}}},exports.getSsecPlugin=function(t){return{applyToStack:function(i){i.add(function(t){var i=this;return function(n){return function(o){return e.__awaiter(i,void 0,void 0,(function(){var i,r,s,a,c,u,f,d,l,S,g,v,p,L,m,E,y;return e.__generator(this,(function(h){switch(h.label){case 0:i=e.__assign({},o.input),r=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],h.label=1;case 1:h.trys.push([1,6,7,8]),s=e.__values(r),a=s.next(),h.label=2;case 2:return a.done?[3,5]:(c=a.value,(u=i[c.target])?(f=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?t.utf8Decoder(u):new Uint8Array(u),d=t.base64Encoder(f),(l=new t.md5).update(f),S=[e.__assign({},i)],(y={})[c.target]=d,g=c.hash,p=(v=t).base64Encoder,[4,l.digest()]):[3,4]);case 3:i=e.__assign.apply(void 0,S.concat([(y[g]=p.apply(v,[h.sent()]),y)])),h.label=4;case 4:return a=s.next(),[3,2];case 5:return[3,8];case 6:return L=h.sent(),m={error:L},[3,8];case 7:try{a&&!a.done&&(E=s.return)&&E.call(s)}finally{if(m)throw m.error}return[7];case 8:return[2,n(e.__assign(e.__assign({},o),{input:i}))]}}))}))}}}(t),fo)}}},exports.serializeAws_restXmlGetObjectCommand=async(e,i)=>{const n={...ao(e.IfMatch)&&{"if-match":e.IfMatch},...ao(e.IfModifiedSince)&&{"if-modified-since":r(e.IfModifiedSince).toString()},...ao(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch},...ao(e.IfUnmodifiedSince)&&{"if-unmodified-since":r(e.IfUnmodifiedSince).toString()},...ao(e.Range)&&{range:e.Range},...ao(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...ao(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...ao(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5},...ao(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...ao(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}};let o="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const i=e.Bucket;if(i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");o=o.replace("{Bucket}",t.extendedEncodeURIComponent(i))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const i=e.Key;if(i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");o=o.replace("{Key+}",i.split("/").map((e=>t.extendedEncodeURIComponent(e))).join("/"))}const s={"x-id":"GetObject",...void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl},...void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition},...void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding},...void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage},...void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType},...void 0!==e.ResponseExpires&&{"response-expires":r(e.ResponseExpires).toString()},...void 0!==e.VersionId&&{versionId:e.VersionId},...void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}};const{hostname:a,protocol:c="https",port:u}=await i.endpoint();return new t.HttpRequest({protocol:c,hostname:a,port:u,method:"GET",headers:n,path:o,query:s,body:undefined})},exports.serializeAws_restXmlPutObjectCommand=async(e,i)=>{const n={"content-type":"application/octet-stream",...ao(e.ACL)&&{"x-amz-acl":e.ACL},...ao(e.CacheControl)&&{"cache-control":e.CacheControl},...ao(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition},...ao(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding},...ao(e.ContentLanguage)&&{"content-language":e.ContentLanguage},...ao(e.ContentLength)&&{"content-length":e.ContentLength.toString()},...ao(e.ContentMD5)&&{"content-md5":e.ContentMD5},...ao(e.ContentType)&&{"content-type":e.ContentType},...ao(e.Expires)&&{expires:r(e.Expires).toString()},...ao(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl},...ao(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead},...ao(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP},...ao(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP},...ao(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption},...ao(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass},...ao(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation},...ao(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm},...ao(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey},...ao(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5},...ao(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId},...ao(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext},...ao(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()},...ao(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer},...ao(e.Tagging)&&{"x-amz-tagging":e.Tagging},...ao(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode},...ao(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()},...ao(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus},...ao(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner},...void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(((t,i)=>({...t,[`x-amz-meta-${i.toLowerCase()}`]:e.Metadata[i]})),{})};let o="/{Bucket}/{Key+}";if(void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");{const i=e.Bucket;if(i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");o=o.replace("{Bucket}",t.extendedEncodeURIComponent(i))}if(void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");{const i=e.Key;if(i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");o=o.replace("{Key+}",i.split("/").map((e=>t.extendedEncodeURIComponent(e))).join("/"))}let s,a;void 0!==e.Body&&(s=e.Body),void 0!==e.Body&&(a=e.Body,s=a);const{hostname:c,protocol:u="https",port:f}=await i.endpoint();return new t.HttpRequest({protocol:u,hostname:c,port:f,method:"PUT",headers:n,path:o,query:{"x-id":"PutObject"},body:s})};
