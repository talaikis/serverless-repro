"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./prerender-manifest.json"),t=require("./manifest.json"),r=require("./routes-manifest.json"),n=require("stream"),a=require("zlib"),i=require("http"),s=require("perf_hooks");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=o(e),c=o(t),d=o(r),l=o(n),f=o(a),p=o(i);const h={"accept-encoding":!0,"content-length":!0,"if-modified-since":!0,"if-none-match":!0,"if-range":!0,"if-unmodified-since":!0,"transfer-encoding":!0,via:!0},m={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy"},g={enableHTTPCompression:!1},v=(e,{enableHTTPCompression:t,rewrittenUri:r}=g)=>{const{request:n,response:a={headers:{}}}=e,i={headers:{}},s=new l.default.Readable,o=Object.assign(s,p.default.IncomingMessage.prototype);o.url=r||n.uri,o.method=n.method,o.rawHeaders=[],o.headers={},o.connection={},n.querystring&&(o.url=o.url+"?"+n.querystring);const u=n.headers||{};for(const e of Object.keys(u)){const t=u[e];t.forEach((e=>{o.rawHeaders.push(e.key),o.rawHeaders.push(e.value)})),o.headers[e]=t[0].value}o.getHeader=e=>o.headers[e.toLowerCase()],o.getHeaders=()=>o.headers,n.body&&n.body.data&&o.push(n.body.data,n.body.encoding?"base64":void 0),o.push(null);const c=new l.default;c.finished=!1,Object.defineProperty(c,"statusCode",{get:()=>i.status,set(e){i.status=e,i.statusDescription=m[e]}}),c.headers={};const d={};c.writeHead=(e,t)=>(i.status=e,t&&(c.headers=Object.assign(c.headers,t)),c),c.write=e=>{i.body||(i.body=Buffer.from("")),i.body=Buffer.concat([i.body,Buffer.isBuffer(e)?e:Buffer.from(e)])};let v=t&&(e=>{let t=!1;const r=e["accept-encoding"];if(r)for(let e=0;e<r.length;e++){const{value:n}=r[e];-1!==n.split(",").map((e=>e.split(";")[0].trim())).indexOf("gzip")&&(t=!0)}return t})(u);const y=new Promise((e=>{c.end=t=>{!0!==c.finished&&(c.finished=!0,t&&c.write(t),c.statusCode||(c.statusCode=200),i.body&&(i.bodyEncoding="base64",i.body=v?f.default.gzipSync(i.body).toString("base64"):Buffer.from(i.body).toString("base64")),i.headers=((e,t,r)=>{const n={},a={};return Object.entries(r).forEach((([e,t])=>{a[e.toLowerCase()]=t})),Object.entries(e).forEach((([e,r])=>{const i=e.toLowerCase();e=t[i]||e,h[i]?a[i]&&(n[i]=a[i]):(n[i]=[],r instanceof Array?r.forEach((t=>{n[i].push({key:e,value:t.toString()})})):n[i].push({key:e,value:r.toString()}))})),n})(c.headers,d,a.headers),v&&(i.headers["content-encoding"]=[{key:"Content-Encoding",value:"gzip"}]),e(i))}}));return c.setHeader=(e,t)=>{c.headers[e.toLowerCase()]=t,d[e.toLowerCase()]=e},c.removeHeader=e=>{delete c.headers[e.toLowerCase()]},c.getHeader=e=>c.headers[e.toLowerCase()],c.getHeaders=()=>c.headers,c.hasHeader=e=>!!c.getHeader(e),{req:o,res:c,responsePromise:y}};v.SPECIAL_NODE_HEADERS=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];var y=v;function w(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var a=1,i="";if("?"===e[o=r+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<e.length;)if("\\"!==e[o]){if(")"===e[o]){if(0==--a){o++;break}}else if("("===e[o]&&(a++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);i+=e[o++]}else i+=e[o++]+e[o++];if(a)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=o}else{for(var s="",o=r+1;o<e.length;){var u=e.charCodeAt(o);if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;s+=e[o++]}if(!s)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:s}),r=o}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,a=void 0===n?"./":n,i="[^"+C(t.delimiter||"/#?")+"]+?",s=[],o=0,u=0,c="",d=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},l=function(e){var t=d(e);if(void 0!==t)return t;var n=r[u],a=n.type,i=n.index;throw new TypeError("Unexpected "+a+" at "+i+", expected "+e)},f=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var p=d("CHAR"),h=d("NAME"),m=d("PATTERN");if(h||m){var g=p||"";-1===a.indexOf(g)&&(c+=g,g=""),c&&(s.push(c),c=""),s.push({name:h||o++,prefix:g,suffix:"",pattern:m||i,modifier:d("MODIFIER")||""})}else{var v=p||d("ESCAPED_CHAR");if(v)c+=v;else if(c&&(s.push(c),c=""),d("OPEN")){g=f();var y=d("NAME")||"",w=d("PATTERN")||"",x=f();l("CLOSE"),s.push({name:y||(w?o++:""),pattern:y&&!w?i:w,prefix:g,suffix:x,modifier:d("MODIFIER")||""})}else l("END")}}return s}function x(e,t){return function(e,t){void 0===t&&(t={});var r=$(t),n=t.encode,a=void 0===n?function(e){return e}:n,i=t.validate,s=void 0===i||i,o=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",n=0;n<e.length;n++){var i=e[n];if("string"!=typeof i){var u=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,d="*"===i.modifier||"+"===i.modifier;if(Array.isArray(u)){if(!d)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var l=0;l<u.length;l++){var f=a(u[l],i);if(s&&!o[n].test(f))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+f+'"');r+=i.prefix+f+i.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var p=d?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+p)}}else{f=a(String(u),i);if(s&&!o[n].test(f))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+f+'"');r+=i.prefix+f+i.suffix}}else r+=i}return r}}(w(e,t),t)}function b(e,t){var r=[];return function(e,t,r){void 0===r&&(r={});var n=r.decode,a=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var i=n[0],s=n.index,o=Object.create(null),u=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=n[e].split(r.prefix+r.suffix).map((function(e){return a(e,r)})):o[r.name]=a(n[e],r)},c=1;c<n.length;c++)u(c);return{path:i,index:s,params:o}}}(R(e,r,t),r,t)}function C(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function $(e){return e&&e.sensitive?"":"i"}function E(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,a=void 0!==n&&n,i=r.start,s=void 0===i||i,o=r.end,u=void 0===o||o,c=r.encode,d=void 0===c?function(e){return e}:c,l="["+C(r.endsWith||"")+"]|$",f="["+C(r.delimiter||"/#?")+"]",p=s?"^":"",h=0,m=e;h<m.length;h++){var g=m[h];if("string"==typeof g)p+=C(d(g));else{var v=C(d(g.prefix)),y=C(d(g.suffix));if(g.pattern)if(t&&t.push(g),v||y)if("+"===g.modifier||"*"===g.modifier){var w="*"===g.modifier?"?":"";p+="(?:"+v+"((?:"+g.pattern+")(?:"+y+v+"(?:"+g.pattern+"))*)"+y+")"+w}else p+="(?:"+v+"("+g.pattern+")"+y+")"+g.modifier;else p+="("+g.pattern+")"+g.modifier;else p+="(?:"+v+y+")"+g.modifier}}if(u)a||(p+=f+"?"),p+=r.endsWith?"(?="+l+")":"$";else{var x=e[e.length-1],b="string"==typeof x?f.indexOf(x[x.length-1])>-1:void 0===x;a||(p+="(?:"+f+"(?="+l+"))?"),b||(p+="(?="+f+"|"+l+")")}return new RegExp(p,$(r))}(w(e,r),t,r)}function R(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,a=r.exec(e.source);a;)t.push({name:a[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),a=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return R(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",$(r))}(e,t,r):E(e,t,r)}function P(e,t){if(t.i18n){const r=t.i18n.defaultLocale,n=t.i18n.locales,a=e.startsWith(t.basePath)?t.basePath:"";for(const t of n)if(e===`${a}/${t}`||e.startsWith(`${a}/${t}/`))return e;return"/"===e||e===`${a}`?`${a}/${r}`:e.replace(`${a}/`,`${a}/${r}/`)}return e}function S(e,t){if(t.i18n){const r=t.i18n.locales;for(const t of r){const r=`/${t}`;if(e===r)return"/";if(e.startsWith(`${r}/`))return`${e.slice(r.length)}`}}return e}const q=async(e,t,r)=>{if(r.i18n){const n=r.i18n.defaultLocale,a=new Set(r.i18n.locales.map((e=>e.toLowerCase()))),i=await Promise.resolve().then((function(){return require("./index-433fb97f.js")})).then((function(e){return e.index}));for(const s of i.languages(e)){const e=s.toLowerCase();if(e===n)break;if(a.has(e))return`${r.basePath}/${e}${t.trailingSlash?"/":""}`}}};function D(e,t){if(t.basePath&&e.startsWith(t.basePath)&&(e=e.slice(t.basePath.length)),t.i18n){for(const r of t.i18n.locales)if(e===`/${r}`||e.startsWith(`/${r}/`))return`/${r}`;return`/${t.i18n.defaultLocale}`}return""}function T(e,t){return b(t,{decode:decodeURIComponent})(e)}function j(e,t){try{const r=e.toLowerCase();if(r.startsWith("https://")||r.startsWith("http://")){const{origin:r,pathname:n}=new URL(e),a=`${r}${x(n,{encode:encodeURIComponent})(t)}`;return!e.endsWith("/")&&a.endsWith("/")?a.slice(0,-1):a}{const r=e.replace(/\?/g,"\\?");return x(r,{encode:encodeURIComponent})(t)}}catch(t){return console.error(`Could not compile destination ${e}, returning null instead. Error: ${t}`),null}}const k=(e,t)=>{for(const{route:r,regex:n}of t){if(new RegExp(n,"i").test(e))return r}},H=(e,t)=>{const r=P(e,t),n={};for(const e of t.headers)if(T(r,e.source))for(const{key:t,value:r}of e.headers)t&&(n[t.toLowerCase()]=[{key:t,value:r}]);return n},O=(e,t)=>{var r;const[n]=(null!==(r=e.req.url)&&void 0!==r?r:"").split("?"),a=H(n,t);for(const[{key:t,value:r}]of Object.values(a))t&&e.res.setHeader(t,r)},M=(e,t)=>{var r;for(const[n,a]of Object.entries(t.headers||[])){const t=a.map((({key:e})=>e)),i=a.map((({value:e})=>e)).join(";");i&&e.res.setHeader(null!==(r=t[0])&&void 0!==r?r:n,i)}},N=(e,t)=>{const{basePath:r,i18n:n}=t;if(r){if(!e.startsWith(r))return(null==n?void 0:n.defaultLocale)?`/${n.defaultLocale}/404`:"/404";e=e.slice(r.length)}return e.endsWith("/")&&(e=e.slice(0,-1)),""===e?"/":e};const L=(e,t,r)=>{const n=`${D(e,r)}/404`;if(t.pages.html.nonDynamic[n]||t.pages.ssg.nonDynamic[n])return{isData:!1,isStatic:!0,file:`pages${n}.html`,statusCode:404}},A=(e,t,r)=>L(e,t,r)||{isData:!1,isRender:!0,page:"pages/_error.js",statusCode:404},_=(e,t)=>{const r=`/_next/data/${t}`;return"/"===e?`${r}/index.json`:`${r}${e}.json`},I=(e,t,r,n)=>{var a;const{buildId:i,pages:s}=t,o=P(((e,t)=>{const r=`/_next/data/${t}`;return e.startsWith(r)?e.slice(r.length).replace(/\.json$/,"").replace(/^(\/index)?$/,"/"):e})(e,i),r);if(s.ssg.nonDynamic[o]&&!n){const e=s.ssg.nonDynamic[o],t=null!==(a=e.srcRoute)&&void 0!==a?a:o;return{isData:!0,isStatic:!0,file:_(o,i),page:`pages${S(t,r)}.js`,revalidate:e.initialRevalidateSeconds}}if(s.ssr.nonDynamic[o])return{isData:!0,isRender:!0,page:s.ssr.nonDynamic[o]};const u=k(o,s.dynamic),c=u&&s.ssg.dynamic[u];if(c)return{isData:!0,isStatic:!0,file:_(o,i),page:`pages${S(u,r)}.js`,fallback:c.fallback};const d=u&&s.ssr.dynamic[u];return d?{isData:!0,isRender:!0,page:d}:((e,t,r)=>L(e,t,r)||{isData:!0,isRender:!0,page:"pages/_error.js",statusCode:404})(e,t,r)},W=e=>"/"==e?"pages/index.html":`pages${e}.html`,U=(e,t,r,n,a)=>{var i;const{pages:s}=t,o=N(P(e,r),r);if(s.html.nonDynamic[o]){const e=S(o,r),t="/404"===e?404:"/500"===e?500:void 0;return{isData:!1,isStatic:!0,file:s.html.nonDynamic[o],statusCode:t}}if(s.ssg.nonDynamic[o]&&!n){const e=s.ssg.nonDynamic[o],t=null!==(i=e.srcRoute)&&void 0!==i?i:o,n=S(o,r),a="/404"===n?404:"/500"===n?500:void 0;return{isData:!1,isStatic:!0,file:W(o),page:`pages${S(t,r)}.js`,revalidate:e.initialRevalidateSeconds,statusCode:a}}if(s.ssr.nonDynamic[o])return{isData:!1,isRender:!0,page:s.ssr.nonDynamic[o]};const u=!a&&function(e,t){const r=P(e,t),n=t.rewrites;for(const e of n){const t=T(r,e.source);if(!t)continue;const n=t.params,a=j(e.destination,n);if(!a)return;const i=Object.keys(n).filter((e=>"nextInternalLocale"!==e)).filter((t=>!e.destination.endsWith(`:${t}`)&&!e.destination.includes(`:${t}/`))).map((e=>{const t=n[e];return"string"==typeof t?`${e}=${t}`:t.map((t=>`${e}=${t}`)).join("&")})).filter((e=>e)).join("&");if(i){const e=a.includes("?")?"&":"?";return`${a}${e}${i}`}return a}}(e,r);if(u){const[e,a]=u.split("?");if((c=e).startsWith("http://")||c.startsWith("https://"))return{isExternal:!0,path:e,querystring:a};return{...U(e,t,r,n,!0),querystring:a}}var c;const d=k(o,s.dynamic),l=d&&s.ssg.dynamic[d];if(l)return{isData:!1,isStatic:!0,file:W(o),page:`pages${S(d,r)}.js`,fallback:l.fallback};const f=d&&s.ssr.dynamic[d];if(f)return{isData:!1,isRender:!0,page:f};const p=d&&s.html.dynamic[d];return p?{isData:!1,isStatic:!0,file:p}:A(e,t,r)};var z=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},a=e.split(F),i=n.decode||B,s=0;s<a.length;s++){var o=a[s],u=o.indexOf("=");if(!(u<0)){var c=o.substr(0,u).trim(),d=o.substr(++u,o.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==r[c]&&(r[c]=G(d,i))}}return r},B=decodeURIComponent,F=/; */;function G(e,t){try{return t(e)}catch(t){return e}}const J={__prerender_bypass:"",__next_preview_data:""},K=e=>(e||[]).reduce(((e,t)=>{const r=z(t.value);return Q(r)?r:e}),J),Q=e=>!(!e.__next_preview_data||!e.__prerender_bypass);function V(e,t,r){let n;if(t){const[r,a]=e.split("?");n=`${r}?${t}${a?`&${a}`:""}`}else n=e;const a=r;return{isRedirect:!0,status:a,statusDescription:i.STATUS_CODES[a]||"",headers:{location:[{key:"Location",value:n}],refresh:308===r?[{key:"Refresh",value:`0;url=${n}`}]:[]}}}const X=(e,t)=>{const{headers:r}=e;return function(e,t){var r;if(t&&t.username&&t.password){const n="Basic "+Buffer.from(t.username+":"+t.password).toString("base64");if(!e||(null===(r=e[0])||void 0===r?void 0:r.value)!==n)return{isUnauthorized:!0,status:401,statusDescription:"Unauthorized",body:"Unauthorized",headers:{"www-authenticate":[{key:"WWW-Authenticate",value:"Basic"}]}}}}(r.authorization,t.authentication)},Y=(e,t)=>{const r=function(e,t){var r;const n=P(e.uri,t),a=null!==(r=t.redirects)&&void 0!==r?r:[];for(const e of a){const t=T(n,e.source);if(t){const r=j(e.destination,t.params);return r?{path:r,statusCode:e.statusCode}:null}}return null}(e,t);if(r){const{path:t,statusCode:n}=r;return V(t,e.querystring,n)}},Z=async(e,t,r)=>{const n=await async function(e,t,r){var n,a,i;if(!1===(null===(n=r.i18n)||void 0===n?void 0:n.localeDetection))return;const s=r.basePath,o=t.trailingSlash,u=s?`${s}${o?"/":""}`:"/",c=e.headers.cookie?null===(a=e.headers.cookie[0])||void 0===a?void 0:a.value:void 0;if(e.uri===u&&c){const e=z(c).NEXT_LOCALE;if(e)return await q(e,t,r)}const d=e.headers["accept-language"],l=d&&(null===(i=d[0])||void 0===i?void 0:i.value);return e.uri===u&&l?await q(l,t,r):void 0}(e,t,r);if(n)return V(n,e.querystring,307)},ee=async(e,t,r,n)=>{const a=X(e,t);if(a)return a;const i=((e,t)=>{const r=function(e,t){const r=e.headers.host;if(r&&r.length>0){const n=r[0].value,a=t.domainRedirects;if(a&&a[n])return`${a[n]}${e.uri}`}}(e,t);if(r)return V(r,e.querystring,308)})(e,t);if(i)return i;const s=N(e.uri,n),o=s.endsWith("/404"),u=s.startsWith("/_next/data"),c=((e,t)=>{const r=decodeURI(e);if(t.publicFiles&&t.publicFiles[r])return{isPublicFile:!0,file:e}})(s,t),d=!o&&((e,t,r)=>{const n=function(e,t,r){const{uri:n}=e;if(r){if(n.endsWith("/"))return n.slice(0,-1)}else if(/^\/[^/]/.test(e.uri)){const e=t.trailingSlash;if(!e&&n.endsWith("/"))return n.slice(0,-1);if(e&&!n.endsWith("/"))return n+"/"}}(e,t,r);if(n)return V(n,e.querystring,308)})(e,t,u||!!c);if(d)return d;if(c)return c;const l=Y(e,n)||await Z(e,t,n);if(l)return l;const f=await(async(e,t)=>{const r=K(e);if(Q(r))try{return(await Promise.resolve().then((function(){return require("./index-2abf717b.js")})).then((function(e){return e.index}))).verify(r.__next_preview_data,t),!0}catch(e){console.warn("Found preview headers without valid authentication token")}return!1})(e.headers.cookie,r.preview.previewModeSigningKey);return u?I(s,t,n,f):U(e.uri,t,n,f)},te=async(e,t,r,n,a,i)=>{var s;console.error(`Error rendering page: ${r.page}. Error:\n${e}\nRendering Next.js error page.`);const{req:o,res:u}=t,c=D(null!==(s=o.url)&&void 0!==s?s:"",a),d=`${c}/500`;if(n.pages.html.nonDynamic[d]||n.pages.ssg.nonDynamic[d])return{isData:r.isData,isStatic:!0,file:`pages${c}/500.html`,statusCode:500};{u.statusCode=500;const e=i("./pages/_error.js");await Promise.race([e.render(o,u),t.responsePromise])}},re=async(e,t,r,n,a)=>{const{req:i,res:s}=e;O(e,n),i.url&&n.i18n&&(i.url=P(i.url,n)),t.statusCode&&(s.statusCode=t.statusCode);const o=a(t.page);try{if(t.isData){const{renderOpts:e}=await o.renderReqToHTML(i,s,"passthrough");s.setHeader("Content-Type","application/json"),s.end(JSON.stringify(e.pageData))}else await Promise.race([o.render(i,s),e.responsePromise])}catch(i){return te(i,e,t,r,n,a)}},ne=async(e,t,r,n,a)=>{const i=(e=>{var t;const[r,n]=(null!==(t=e.req.url)&&void 0!==t?t:"").split("?"),a={};for(const[t,r]of Object.entries(e.req.headers))r&&Array.isArray(r)?a[t.toLowerCase()]=r.map((e=>({key:t,value:e}))):r&&(a[t.toLowerCase()]=[{key:t,value:r}]);return{headers:a,querystring:n,uri:r}})(e),s=await ee(i,t,r,n);return s.querystring&&(e.req.url=`${e.req.url}${i.querystring?"&":"?"}${s.querystring}`),s.isRedirect?((e,t)=>{M(e,t),e.res.statusCode=t.status,e.res.statusMessage=t.statusDescription,e.res.end()})(e,s):s.isRender?re(e,s,t,n,a):s.isUnauthorized?((e,t)=>{M(e,t),e.res.statusCode=t.status,e.res.statusMessage=t.statusDescription,e.res.end()})(e,s):s},ae=async(e,t,r,n,a)=>{var i;if(t.isRender)return re(e,t,r,n,a);if(t.isStatic){const i=t;if((i.fallback&&i.isData||null===i.fallback)&&i.page){return(async(e,t,r,n,a)=>{const{req:i,res:s}=e;O(e,n);const o=a(t.page);try{const{html:e,renderOpts:r}=await o.renderReqToHTML(i,s,"passthrough");return{isStatic:!1,route:t,html:e,renderOpts:r}}catch(i){return te(i,e,t,r,n,a)}})(e,i,r,n,a)}if(i.fallback)return{...i,file:`pages${i.fallback}`}}const s=A(null!==(i=e.req.url)&&void 0!==i?i:"",r,n);return s.isStatic?s:re(e,s,r,n,a)},ie=e=>{const{initialRevalidateSeconds:t}=e;if(!(e.expiresHeader||e.lastModifiedHeader&&"number"==typeof t))return!1;const r=e.expiresHeader?new Date(e.expiresHeader):((e,t)=>new Date(new Date(e).getTime()+1e3*t))(e.lastModifiedHeader,t),n=Math.ceil(Math.max(0,(r.getTime()-Date.now())/1e3));return{secondsRemainingUntilRevalidation:n,cacheControl:`public, max-age=0, s-maxage=${n}, must-revalidate`}},se=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip","content-length","host","transfer-encoding","via"],oe=["x-amz-cf-","x-amzn-","x-edge-"];function ue(e){const t=e.toLowerCase();for(const e of oe)if(t.startsWith(e))return!0;return se.includes(t)}const ce=async(e,t,r)=>{var n;const a=e.Records[0].cf.request,{req:i,res:s,responsePromise:o}=y(e.Records[0].cf,{enableHTTPCompression:t});return await async function(e,t,r,n){const{default:a}=await Promise.resolve().then((function(){return require("./index-9e574644.js")})),i={};let s;if(Object.assign(i,t.headers),i.hasOwnProperty("host")&&delete i.host,n){const r=Buffer.from(n,"base64").toString("utf8");s=await a(e,{headers:i,method:t.method,body:r,compress:!1,redirect:"manual"})}else s=await a(e,{headers:i,method:t.method,compress:!1,redirect:"manual"});for(const[e,t]of s.headers.entries())ue(e)||r.setHeader(e,t);r.statusCode=s.status,r.end(await s.buffer())}(r+(a.querystring?"?":"")+a.querystring,i,s,null===(n=a.body)||void 0===n?void 0:n.data),await o},de=async()=>{const{defaultRetryDecider:e,StandardRetryStrategy:t}=await Promise.resolve().then((function(){return require("./index-be8fd6bc.js")}));return new t((async()=>3),{retryDecider:t=>"code"in t&&("ECONNRESET"===t.code||"EPIPE"===t.code||"ETIMEDOUT"===t.code)||e(t)})},le=["connection","expect","keep-alive","proxy-authenticate","proxy-authorization","proxy-connection","trailer","upgrade","x-accel-buffering","x-accel-charset","x-accel-limit-rate","x-accel-redirect","x-cache","x-forwarded-proto","x-real-ip"],fe=["x-amz-cf-","x-amzn-","x-edge-"];function pe(e){const t=e.toLowerCase();for(const e of fe)if(t.startsWith(e))return!0;return le.includes(t)}const he=e=>{var t;const{region:r,domainName:n}=(null===(t=e.origin)||void 0===t?void 0:t.s3)||{};return null==n?void 0:n.replace(`.s3.${r}.amazonaws.com`,"")},me=d.default.basePath,ge=e=>e?{now:()=>s.performance.now(),log:(e,t,r)=>{t&&r&&console.log(`${e}: ${r-t} (ms)`)}}:{now:()=>0,log:()=>{}},ve=(e,t,r)=>{var n;const a=null===(n=e.origin)||void 0===n?void 0:n.s3,i=(e=>{if("us-east-1"===e.region)return e.domainName;if(!e.domainName.includes(e.region))return e.domainName.replace("s3.amazonaws.com",`s3.${e.region}.amazonaws.com`);return e.domainName})(a);var s;return a.domainName=i,a.path=r,e.uri=t,s=i,e.headers.host=[{key:"host",value:s}],e},ye=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var a;const i=e.Records[0].cf.request,{req:s,res:o,responsePromise:u}=y(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),{now:c,log:d}=ge(t.logLambdaExecutionTimes);let l=null;const f=await ne({req:s,res:o,responsePromise:u},t,r,n,(e=>{const t=c(),r=require(`./${e}`),n=l=c();return d("require JS execution time",t,n),r}));if(l){const e=c();d("SSR execution time",l,e)}if(!f)return await u;if(f.isPublicFile){const{file:e}=f;return ve(i,e,`${n.basePath}/public`)}if(f.isStatic){const{file:e,isData:r}=f,o=r?`${n.basePath}`:`${n.basePath}/static-pages/${t.buildId}`,[,u]=(null!==(a=s.url)&&void 0!==a?a:"").split("?");i.querystring=u||"";const c=r?e:e.slice("pages".length);return ve(i,c,o)}const p=f,{path:h}=p;return ce(e,t.enableHTTPCompression,h)},we=async({event:e,manifest:t,prerenderManifest:r,routesManifest:n})=>{var a,i,s,o,u,c,d,l,f,p,h;const m=e.Records[0].cf.response,g=e.Records[0].cf.request,v=he(g),w=g.uri;g.uri=`${me}${g.uri.replace(/(\.html)?$/,t.trailingSlash?"/":"")}`;const x=await ee(g,t,r,n),b=x.isStatic?x:void 0,C=null==x?void 0:x.statusCode;if("403"!==m.status){if(m.headers={...m.headers,...H(g.uri,n)},404===C)return m.status="404",m.statusDescription="Not Found",m;if(500===C)return m.status="500",m.statusDescription="Internal Server Error",m.headers["cache-control"]=[{key:"Cache-Control",value:"public, max-age=0, s-maxage=0, must-revalidate"}],m;const e=ie({expiresHeader:(null===(s=null===(i=null===(a=m.headers)||void 0===a?void 0:a.expires)||void 0===i?void 0:i[0])||void 0===s?void 0:s.value)||"",lastModifiedHeader:(null===(c=null===(u=null===(o=m.headers)||void 0===o?void 0:o["last-modified"])||void 0===u?void 0:u[0])||void 0===c?void 0:c.value)||"",initialRevalidateSeconds:null==b?void 0:b.revalidate});if(e&&(m.headers["cache-control"]=[{key:"Cache-Control",value:e.cacheControl}],delete m.headers.expires,(null==b?void 0:b.page)&&0===e.secondsRemainingUntilRevalidation)){const{throttle:e}=await(async e=>{var t,r,n;const{region:a}=(null===(t=e.request.origin)||void 0===t?void 0:t.s3)||{},i=he(e.request);if(!i)throw new Error("Expected bucket name to be defined");if(!a)throw new Error("Expected region to be defined");const{SQSClient:s,SendMessageCommand:o}=await Promise.resolve().then((function(){return require("./index-cf0a9fd0.js")})),u=new s({region:a,maxAttempts:1,retryStrategy:await de()}),c={region:a,bucketName:i,cloudFrontEventRequest:e.request,basePath:e.basePath,pagePath:e.pagePath};try{return await u.send(new o({QueueUrl:`https://sqs.${a}.amazonaws.com/${i}.fifo`,MessageBody:JSON.stringify(c),MessageDeduplicationId:(null===(r=e.response.headers.etag)||void 0===r?void 0:r[0].value)||new Date(null===(n=e.response.headers["last-modified"])||void 0===n?void 0:n[0].value).getTime().toString(),MessageGroupId:e.request.uri})),{throttle:!1}}catch(e){if("RequestThrottled"===e.code)return{throttle:!0};throw e}})({basePath:me,request:g,response:m,pagePath:b.page});e&&(m.headers["cache-control"]=[{key:"Cache-Control",value:($=1,{secondsRemainingUntilRevalidation:$,cacheControl:`public, max-age=0, s-maxage=${$}, must-revalidate`}).cacheControl}])}return m}var $;if("PUT"===g.method||"DELETE"===g.method)return m;const{req:E,res:R,responsePromise:P}=y(e.Records[0].cf,{enableHTTPCompression:t.enableHTTPCompression}),S=await ae({req:E,res:R,responsePromise:P},x,t,n,(e=>require(`./${e}`)));if(!S)return await P;const{S3Client:q}=await Promise.resolve().then((function(){return require("./S3Client-eeef20d9.js")})),D=new q({region:null===(l=null===(d=g.origin)||void 0===d?void 0:d.s3)||void 0===l?void 0:l.region,maxAttempts:3,retryStrategy:await de()}),T=me?`${me.replace(/^\//,"")}/`:"";if(S.isStatic){const e=S.file.slice("pages".length),r=`${T}static-pages/${t.buildId}${e}`,{GetObjectCommand:a}=await Promise.resolve().then((function(){return require("./GetObjectCommand-2dc84f9e.js")})),i=await Promise.resolve().then((function(){return require("./index-891c56ba.js")})).then((function(e){return e.index})),s={Bucket:v,Key:r},o=await D.send(new a(s)),u=await i.default(o.Body),c=(S.statusCode||200).toString(),d="404"===c,l="500"===c;return{status:c,statusDescription:l?"Internal Server Error":d?"Not Found":"OK",headers:{...m.headers,...H(g.uri,n),"content-type":[{key:"Content-Type",value:"text/html"}],"cache-control":[{key:"Cache-Control",value:l?"public, max-age=0, s-maxage=0, must-revalidate":null!==(f=o.CacheControl)&&void 0!==f?f:S.fallback?"public, max-age=0, s-maxage=0, must-revalidate":"public, max-age=0, s-maxage=2678400, must-revalidate"}]},body:u}}const{renderOpts:j,html:k}=S,{expires:O}=await(async e=>{const{S3Client:t}=await Promise.resolve().then((function(){return require("./S3Client-eeef20d9.js")})),r=new t({region:e.region,maxAttempts:3,retryStrategy:await de()}),n=e.basePath?`${e.basePath.replace(/^\//,"")}/`:"",a=e.uri.replace(/^\//,"").replace(/\.(json|html)$/,"").replace(/^_next\/data\/[^\/]*\//,""),i=`_next/data/${e.buildId}/${a}.json`,s=`static-pages/${e.buildId}/${a}.html`,o=e.revalidate?void 0:"public, max-age=0, s-maxage=2678400, must-revalidate",u=e.revalidate?new Date((new Date).getTime()+1e3*e.revalidate):void 0,c={Bucket:e.bucketName,Key:`${n}${i}`,Body:JSON.stringify(e.pageData),ContentType:"application/json",CacheControl:o,Expires:u},d={Bucket:e.bucketName,Key:`${n}${s}`,Body:e.html,ContentType:"text/html",CacheControl:o,Expires:u},{PutObjectCommand:l}=await Promise.resolve().then((function(){return require("./PutObjectCommand-4380f8c5.js")}));return await Promise.all([r.send(new l(c)),r.send(new l(d))]),{cacheControl:o,expires:u}})({html:k,uri:w,basePath:me,bucketName:v||"",buildId:t.buildId,pageData:j.pageData,region:(null===(h=null===(p=g.origin)||void 0===p?void 0:p.s3)||void 0===h?void 0:h.region)||"",revalidate:j.revalidate}),M=O?ie({expiresHeader:O.toJSON(),lastModifiedHeader:void 0,initialRevalidateSeconds:null==b?void 0:b.revalidate}):null,N=M&&M.cacheControl||"public, max-age=0, s-maxage=2678400, must-revalidate",L={};return Object.entries(m.headers).map((([e,t])=>{L[e]=t.map((({value:e})=>e))})),R.writeHead(200,L),R.setHeader("Cache-Control",N),S.route.isData?(R.setHeader("Content-Type","application/json"),R.end(JSON.stringify(j.pageData))):(R.setHeader("Content-Type","text/html"),R.end(k)),await P},xe=e=>"origin-response"===e.Records[0].cf.config.eventType;exports.handler=async e=>{const t=c.default;let r;const n=u.default,a=d.default,{now:i,log:s}=ge(t.logLambdaExecutionTimes),o=i();r=xe(e)?await we({event:e,manifest:t,prerenderManifest:n,routesManifest:a}):await ye({event:e,manifest:t,prerenderManifest:n,routesManifest:a}),r.headers&&function(e){for(const t in e)pe(t)&&delete e[t]}(r.headers);return s("handler execution time",o,i()),r};
